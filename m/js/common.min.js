var gaRank=["\u5382\u5bb6","\u4ee3\u7406\u5546","\u7ec8\u7aef\u5e97","\u8fde\u9501\u5e97"];var Host=window.location.protocol+"//"+window.location.host+"/";var splt1="|~";var gurl={root:Host};function checkLogin(){var s=$.cookie("user_data");if(s)return true;else{setTimeout(function(){window.location="l.aspx?to="+window.location.href},200);return false}}function logout(){$.cookie("userid",null);gls.clear();window.location="l.aspx"}
var gls={aAu:[],aMyFunc:[],ini:function(){},toJson:function(data){if(data)try{return JSON.parse(data)}catch(e){gf.log("toJson:"+data);return{}}else return{}},clear:function(){localStorage.userdetail=""}};
var ur={a:[],ini:function(index){if(this.a.length==0){var s=decodeURIComponent($.cookie("user_data"));if(s)this.a=s.split(splt1)}},user:function(){this.ini();return{id:this.a[0],name:this.a[1],role:this.a[4],agentId:this.a[3],DistrictCode:this.a[2],rank:this.a[8],coid:this.a[9],coName:this.a[10],code:this.a[11],children:this.a[12],erpID:this.a[13]}}};
var gtips={dvNotice:null,dvAjax:null,dvMask:null,ini:function(){if(!this.dvAjax){$("body").append('<div id="dvTopNotice" class="notice center"></div><div id="waitTips" class="wait" style="display:none;">\u6b63\u5728\u5904\u7406\uff0c\u8bf7\u7a0d\u540e...</div>');this.dvAjax=$("#waitTips");this.dvNotice=$("#dvTopNotice");this.dvMask=$("#dvMask")}},showNotice:function(msg){var om=this;this.dvNotice.html(msg);if(this.dvNotice.is(":hidden")){this.dvNotice.show().css({"top":$("body").scrollTop(),"left":$("body").width()/
2-200});setTimeout(function(){om.dvNotice.css({"top":$("body").scrollTop()-100});om.dvNotice.fadeOut(400)},5E3)}},showAjax:function(msg){if(!msg)msg="\u6b63\u5728\u5904\u7406\uff0c\u8bf7\u7a0d\u540e...";this.ini();this.dvAjax.text(msg).show(5)},showMask:function(){this.dvMask.show()},hideMask:function(){this.dvMask.hide()},hideAjax:function(){this.dvAjax.hide(5)}};
var pgf={ajax:function(par){var onerror=function(msg){gf.log(msg);alert("\u6570\u636e\u64cd\u4f5c\u51fa\u9519\n\u5f02\u5e38\u4fe1\u606f\u5982\u4e0b\uff1a"+msg)};par=$.extend({type:"post",dataType:"json",url:"/handlers/pgCommon.ashx",success:function(){},error:onerror,code:"",data:{}},par);var od="";try{od=JSON.stringify(par.data)}catch(e){od=T.json.stringify(par.data)}var s=function(data,textStatus){if(textStatus=="success")if(data.ISSuccess===1)par.success(data);else{if(par.error)par.error(data.ErrorMessage)}else if(par.error)par.error(data.ErrorMessage)};
$.ajax({type:par.type,dataType:par.dataType,url:par.url,data:{OperationCode:par.code,OperationData:od},beforeSend:function(XMLHttpRequest){},success:function(data,textStatus){s(data,textStatus)},error:function(XMLHttpRequest,status){if(status=="parsererror"){s(T.json.parse(XMLHttpRequest.responseText),"success");return}if(par.error)par.error(XMLHttpRequest.responseText)}})},codeData:function(code,aPara,success,conType,onError){gtips.showAjax();var data={ObjectName:code,Values:aPara,ConType:conType};
try{data.ConField=localStorage&&localStorage.last_db_login_success?localStorage.last_db_login_success:""}catch(e){}this.ajax({code:"query",data:data,error:onError||function(m){alert(m)},success:function(jsn){gtips.hideAjax();var a=jsn.OutputTable;if($.isArray(a)){if(a.length>0)if(a[0].length==1)for(var i=0;i<a.length;i++)a[i]=a[i][0]}else a=[];success(a,jsn.ReturnValue)}})},codeTableData:function(code,aPara,success,conType,onError){gtips.showAjax();var data={ObjectName:code,Values:aPara,ConType:conType};
try{data.ConField=localStorage&&localStorage.last_db_login_success?localStorage.last_db_login_success:""}catch(e){}this.ajax({code:"query",data:data,error:onError,success:function(jsn){gtips.hideAjax();success(jsn.OutputTable,jsn.ReturnValue)}})},batchUpdate:function(code,aPara,success,conType,onError){gtips.showAjax();var data={ObjectName:code,Values:aPara,ConType:conType};try{data.ConField=localStorage&&localStorage.last_db_login_success?localStorage.last_db_login_success:""}catch(e){}this.ajax({code:"batchUpdate",
data:data,error:onError,success:function(jsn){gtips.hideAjax();if(jsn.ISSuccess!=1)if(onError)onError(jsn.ErrorMessage);else alert(jsn.ErrorMessage);else success()}})}};
